{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../api';import{toast}from'react-toastify';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyOrders(_ref){let{user}=_ref;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{if(!user){toast.info('Please log in to see your orders.');navigate('/login');return;}const fetchOrders=async()=>{try{const config={headers:{Authorization:`Bearer ${user.token}`}};// The backend route is /api/orders/myorders\nconst{data}=await api.get('/orders/myorders',config);setOrders(data);}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Could not fetch orders.');}finally{setLoading(false);}};fetchOrders();},[user,navigate]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading your orders...\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'800px',margin:'auto'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Orders\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"You have no orders yet.\"}):orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ddd',borderRadius:'8px',padding:'1rem',marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',borderBottom:'1px solid #eee',paddingBottom:'0.5rem',marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order ID:\"}),\" \",order._id,/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{textTransform:'capitalize'},children:order.status})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(order.createdAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"}),\" \\u20B9\",order.totalAmount.toFixed(2)]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Items:\"}),/*#__PURE__*/_jsx(\"ul\",{children:order.pizzas.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.name,\" (x\",item.quantity,\")\",item.isCustom&&` - ${item.base}, ${item.sauce}`]},index))})]},order._id))]});}","map":{"version":3,"names":["React","useState","useEffect","api","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","MyOrders","_ref","user","orders","setOrders","loading","setLoading","navigate","info","fetchOrders","config","headers","Authorization","token","data","get","error","_error$response","_error$response$data","response","message","children","style","padding","maxWidth","margin","length","map","order","border","borderRadius","marginBottom","display","justifyContent","borderBottom","paddingBottom","_id","textTransform","status","Date","createdAt","toLocaleDateString","totalAmount","toFixed","pizzas","item","index","name","quantity","isCustom","base","sauce"],"sources":["C:/Users/LAPZONE/pizza-delivery-app/frontend/src/pages/MyOrders.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../api';\r\nimport { toast } from 'react-toastify';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function MyOrders({ user }) {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      toast.info('Please log in to see your orders.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    const fetchOrders = async () => {\r\n      try {\r\n        const config = {\r\n          headers: {\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        };\r\n        // The backend route is /api/orders/myorders\r\n        const { data } = await api.get('/orders/myorders', config);\r\n        setOrders(data);\r\n      } catch (error) {\r\n        toast.error(error.response?.data?.message || 'Could not fetch orders.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, [user, navigate]);\r\n\r\n  if (loading) {\r\n    return <div>Loading your orders...</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '800px', margin: 'auto' }}>\r\n      <h1>My Orders</h1>\r\n      {orders.length === 0 ? (\r\n        <p>You have no orders yet.</p>\r\n      ) : (\r\n        orders.map((order) => (\r\n          <div key={order._id} style={{ border: '1px solid #ddd', borderRadius: '8px', padding: '1rem', marginBottom: '1rem' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', borderBottom: '1px solid #eee', paddingBottom: '0.5rem', marginBottom: '0.5rem' }}>\r\n              <strong>Order ID:</strong> {order._id}\r\n              <span><strong>Status:</strong> <span style={{ textTransform: 'capitalize' }}>{order.status}</span></span>\r\n            </div>\r\n            <p><strong>Date:</strong> {new Date(order.createdAt).toLocaleDateString()}</p>\r\n            <p><strong>Total:</strong> â‚¹{order.totalAmount.toFixed(2)}</p>\r\n            <h4>Items:</h4>\r\n            <ul>\r\n              {order.pizzas.map((item, index) => (\r\n                <li key={index}>\r\n                  {item.name} (x{item.quantity})\r\n                  {item.isCustom && ` - ${item.base}, ${item.sauce}`}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}