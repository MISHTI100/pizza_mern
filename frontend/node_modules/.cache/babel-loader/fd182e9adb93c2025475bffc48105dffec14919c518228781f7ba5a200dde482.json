{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../api';import Pizza from'../components/Pizza';import Pagination from'../components/Pagination';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(_ref){let{addToCart}=_ref;const[pizzas,setPizzas]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// State for filtering and pagination\nconst[searchTerm,setSearchTerm]=useState('');const[category,setCategory]=useState('all');const[page,setPage]=useState(1);const[pages,setPages]=useState(1);useEffect(()=>{let isMounted=true;const fetchPizzas=async()=>{try{setLoading(true);const{data}=await api.get(`/pizzas?page=${page}&search=${searchTerm}&category=${category}`);if(isMounted){setPizzas(data.pizzas);setPages(data.pages);}}catch(err){if(isMounted){console.error(\"Failed to fetch pizzas:\",err);setError('Could not load pizzas. Please make sure the backend server is running.');}}finally{if(isMounted){setLoading(false);}}};fetchPizzas();return()=>{isMounted=false;};},[page,searchTerm,category]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading menu...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{style:{color:'red',padding:'20px'},children:error});// Hardcoded categories. In a larger app, this could be fetched from its own API endpoint.\nconst categories=['all','veg','non-veg','classic','specialty'];const handleFilterChange=setter=>e=>{setter(e.target.value);setPage(1);// Reset to the first page whenever a filter changes\n};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',gap:'2rem',marginBottom:'2rem',alignItems:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"search\",style:{marginRight:'0.5rem'},children:\"Search Pizzas:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"search\",type:\"text\",placeholder:\"e.g., Margherita\",value:searchTerm,onChange:handleFilterChange(setSearchTerm),style:{padding:'8px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",style:{marginRight:'0.5rem'},children:\"Filter by Category:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"category\",value:category,onChange:handleFilterChange(setCategory),style:{padding:'8px',textTransform:'capitalize'},children:categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat,style:{textTransform:'capitalize'},children:cat},cat))})]})]}),/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center'},children:\"Pizza Menu\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'20px',justifyContent:'center'},children:pizzas.length>0?pizzas.map(pizza=>/*#__PURE__*/_jsx(Pizza,{pizza:pizza,addToCart:addToCart},pizza._id)):/*#__PURE__*/_jsx(\"p\",{children:\"No pizzas match your criteria. Try adjusting your search or filters.\"})}),/*#__PURE__*/_jsx(Pagination,{pages:pages,page:page,setPage:setPage})]});}","map":{"version":3,"names":["React","useState","useEffect","api","Pizza","Pagination","jsx","_jsx","jsxs","_jsxs","Home","_ref","addToCart","pizzas","setPizzas","loading","setLoading","error","setError","searchTerm","setSearchTerm","category","setCategory","page","setPage","pages","setPages","isMounted","fetchPizzas","data","get","err","console","children","style","color","padding","categories","handleFilterChange","setter","e","target","value","display","justifyContent","gap","marginBottom","alignItems","flexWrap","htmlFor","marginRight","id","type","placeholder","onChange","textTransform","map","cat","textAlign","length","pizza","_id"],"sources":["C:/Users/LAPZONE/pizza-delivery-app/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../api';\r\nimport Pizza from '../components/Pizza';\r\nimport Pagination from '../components/Pagination';\r\n\r\nexport default function Home({ addToCart }) {\r\n  const [pizzas, setPizzas] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // State for filtering and pagination\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [category, setCategory] = useState('all');\r\n  const [page, setPage] = useState(1);\r\n  const [pages, setPages] = useState(1);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const fetchPizzas = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const { data } = await api.get(`/pizzas?page=${page}&search=${searchTerm}&category=${category}`);\r\n        if (isMounted) {\r\n          setPizzas(data.pizzas);\r\n          setPages(data.pages);\r\n        }\r\n      } catch (err) {\r\n        if (isMounted) {\r\n          console.error(\"Failed to fetch pizzas:\", err);\r\n          setError('Could not load pizzas. Please make sure the backend server is running.');\r\n        }\r\n      } finally {\r\n        if (isMounted) {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchPizzas();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [page, searchTerm, category]);\r\n\r\n  if (loading) return <div>Loading menu...</div>;\r\n  if (error) return <div style={{ color: 'red', padding: '20px' }}>{error}</div>;\r\n\r\n  // Hardcoded categories. In a larger app, this could be fetched from its own API endpoint.\r\n  const categories = ['all', 'veg', 'non-veg', 'classic', 'specialty'];\r\n\r\n  const handleFilterChange = (setter) => (e) => {\r\n    setter(e.target.value);\r\n    setPage(1); // Reset to the first page whenever a filter changes\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <div style={{ display: 'flex', justifyContent: 'center', gap: '2rem', marginBottom: '2rem', alignItems: 'center', flexWrap: 'wrap' }}>\r\n        <div>\r\n          <label htmlFor=\"search\" style={{ marginRight: '0.5rem' }}>Search Pizzas:</label>\r\n          <input\r\n            id=\"search\"\r\n            type=\"text\"\r\n            placeholder=\"e.g., Margherita\"\r\n            value={searchTerm}\r\n            onChange={handleFilterChange(setSearchTerm)}\r\n            style={{ padding: '8px' }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"category\" style={{ marginRight: '0.5rem' }}>Filter by Category:</label>\r\n          <select\r\n            id=\"category\"\r\n            value={category}\r\n            onChange={handleFilterChange(setCategory)}\r\n            style={{ padding: '8px', textTransform: 'capitalize' }}\r\n          >\r\n            {categories.map(cat => (\r\n              <option key={cat} value={cat} style={{ textTransform: 'capitalize' }}>\r\n                {cat}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <h2 style={{ textAlign: 'center' }}>Pizza Menu</h2>\r\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '20px', justifyContent: 'center' }}>\r\n        {pizzas.length > 0 ? (\r\n          pizzas.map(pizza => (\r\n            <Pizza key={pizza._id} pizza={pizza} addToCart={addToCart} />\r\n          ))\r\n        ) : (\r\n          <p>No pizzas match your criteria. Try adjusting your search or filters.</p>\r\n        )}\r\n      </div>\r\n      <Pagination pages={pages} page={page} setPage={setPage} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,QAAQ,CACxB,MAAO,CAAAC,KAAK,KAAM,qBAAqB,CACvC,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,cAAe,SAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAgB,IAAf,CAAEC,SAAU,CAAC,CAAAD,IAAA,CACxC,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAExC;AACA,KAAM,CAACkB,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACsB,IAAI,CAAEC,OAAO,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACwB,KAAK,CAAEC,QAAQ,CAAC,CAAGzB,QAAQ,CAAC,CAAC,CAAC,CAErCC,SAAS,CAAC,IAAM,CACd,GAAI,CAAAyB,SAAS,CAAG,IAAI,CACpB,KAAM,CAAAC,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACFZ,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAEa,IAAK,CAAC,CAAG,KAAM,CAAA1B,GAAG,CAAC2B,GAAG,CAAC,gBAAgBP,IAAI,WAAWJ,UAAU,aAAaE,QAAQ,EAAE,CAAC,CAChG,GAAIM,SAAS,CAAE,CACbb,SAAS,CAACe,IAAI,CAAChB,MAAM,CAAC,CACtBa,QAAQ,CAACG,IAAI,CAACJ,KAAK,CAAC,CACtB,CACF,CAAE,MAAOM,GAAG,CAAE,CACZ,GAAIJ,SAAS,CAAE,CACbK,OAAO,CAACf,KAAK,CAAC,yBAAyB,CAAEc,GAAG,CAAC,CAC7Cb,QAAQ,CAAC,wEAAwE,CAAC,CACpF,CACF,CAAC,OAAS,CACR,GAAIS,SAAS,CAAE,CACbX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CACF,CAAC,CAEDY,WAAW,CAAC,CAAC,CAEb,MAAO,IAAM,CACXD,SAAS,CAAG,KAAK,CACnB,CAAC,CACH,CAAC,CAAE,CAACJ,IAAI,CAAEJ,UAAU,CAAEE,QAAQ,CAAC,CAAC,CAEhC,GAAIN,OAAO,CAAE,mBAAOR,IAAA,QAAA0B,QAAA,CAAK,iBAAe,CAAK,CAAC,CAC9C,GAAIhB,KAAK,CAAE,mBAAOV,IAAA,QAAK2B,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAK,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAH,QAAA,CAAEhB,KAAK,CAAM,CAAC,CAE9E;AACA,KAAM,CAAAoB,UAAU,CAAG,CAAC,KAAK,CAAE,KAAK,CAAE,SAAS,CAAE,SAAS,CAAE,WAAW,CAAC,CAEpE,KAAM,CAAAC,kBAAkB,CAAIC,MAAM,EAAMC,CAAC,EAAK,CAC5CD,MAAM,CAACC,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACtBlB,OAAO,CAAC,CAAC,CAAC,CAAE;AACd,CAAC,CAED,mBACEf,KAAA,QAAKyB,KAAK,CAAE,CAAEE,OAAO,CAAE,MAAO,CAAE,CAAAH,QAAA,eAC9BxB,KAAA,QAAKyB,KAAK,CAAE,CAAES,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,GAAG,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAAf,QAAA,eACnIxB,KAAA,QAAAwB,QAAA,eACE1B,IAAA,UAAO0C,OAAO,CAAC,QAAQ,CAACf,KAAK,CAAE,CAAEgB,WAAW,CAAE,QAAS,CAAE,CAAAjB,QAAA,CAAC,gBAAc,CAAO,CAAC,cAChF1B,IAAA,UACE4C,EAAE,CAAC,QAAQ,CACXC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,kBAAkB,CAC9BX,KAAK,CAAEvB,UAAW,CAClBmC,QAAQ,CAAEhB,kBAAkB,CAAClB,aAAa,CAAE,CAC5Cc,KAAK,CAAE,CAAEE,OAAO,CAAE,KAAM,CAAE,CAC3B,CAAC,EACC,CAAC,cACN3B,KAAA,QAAAwB,QAAA,eACE1B,IAAA,UAAO0C,OAAO,CAAC,UAAU,CAACf,KAAK,CAAE,CAAEgB,WAAW,CAAE,QAAS,CAAE,CAAAjB,QAAA,CAAC,qBAAmB,CAAO,CAAC,cACvF1B,IAAA,WACE4C,EAAE,CAAC,UAAU,CACbT,KAAK,CAAErB,QAAS,CAChBiC,QAAQ,CAAEhB,kBAAkB,CAAChB,WAAW,CAAE,CAC1CY,KAAK,CAAE,CAAEE,OAAO,CAAE,KAAK,CAAEmB,aAAa,CAAE,YAAa,CAAE,CAAAtB,QAAA,CAEtDI,UAAU,CAACmB,GAAG,CAACC,GAAG,eACjBlD,IAAA,WAAkBmC,KAAK,CAAEe,GAAI,CAACvB,KAAK,CAAE,CAAEqB,aAAa,CAAE,YAAa,CAAE,CAAAtB,QAAA,CAClEwB,GAAG,EADOA,GAEL,CACT,CAAC,CACI,CAAC,EACN,CAAC,EACH,CAAC,cAENlD,IAAA,OAAI2B,KAAK,CAAE,CAAEwB,SAAS,CAAE,QAAS,CAAE,CAAAzB,QAAA,CAAC,YAAU,CAAI,CAAC,cACnD1B,IAAA,QAAK2B,KAAK,CAAE,CAAES,OAAO,CAAE,MAAM,CAAEK,QAAQ,CAAE,MAAM,CAAEH,GAAG,CAAE,MAAM,CAAED,cAAc,CAAE,QAAS,CAAE,CAAAX,QAAA,CACtFpB,MAAM,CAAC8C,MAAM,CAAG,CAAC,CAChB9C,MAAM,CAAC2C,GAAG,CAACI,KAAK,eACdrD,IAAA,CAACH,KAAK,EAAiBwD,KAAK,CAAEA,KAAM,CAAChD,SAAS,CAAEA,SAAU,EAA9CgD,KAAK,CAACC,GAA0C,CAC7D,CAAC,cAEFtD,IAAA,MAAA0B,QAAA,CAAG,sEAAoE,CAAG,CAC3E,CACE,CAAC,cACN1B,IAAA,CAACF,UAAU,EAACoB,KAAK,CAAEA,KAAM,CAACF,IAAI,CAAEA,IAAK,CAACC,OAAO,CAAEA,OAAQ,CAAE,CAAC,EACvD,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}